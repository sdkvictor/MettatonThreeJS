<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>My first three.js app</title>
		<link rel="stylesheet" href="css/main.css"> 
	</head>
	<body>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>        
        <script src="js/mtl.js"></script>
        <script src="js/obj.js"></script>
		<script>
			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
            camera.position.z = 50;
            camera.position.x = 0;
            //scene.setClearColor('#')
			const renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
            renderer.setClearColor('#DFFDDD');
			renderer.setSize( window.innerWidth, window.innerHeight );
            
			document.body.appendChild( renderer.domElement );

            window.addEventListener('resize', () => {
                renderer.setSize(window.innerWidth, window.innerHeight);
                camera.aspect = window.innerWidth / window.innerHeight;

                camera.updateProjectMatrix();
            })
            

            //Add light
            var light = new THREE.PointLight(0xFFFFFF, 1.4, 1000);
            light.position.set(0,15,15);
            var light2 = new THREE.PointLight(0xFFFFFF, 1.4, 1000);
            light2.position.set(80,0,80);
            scene.add(light);
            scene.add(light2);

			/*
            const geometry = new THREE.BoxGeometry();
			const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
			const cube = new THREE.Mesh( geometry, material );
			scene.add( cube );

            */
            

            var stageObj;
            var mtlLoader = new THREE.MTLLoader();
            mtlLoader.load('assets/stage.mtl', function (materials) {
                materials.preload();
                var objLoader = new THREE.OBJLoader();
                objLoader.setMaterials(materials);
                objLoader.load('assets/stage.obj', function (object){
                    scene.add(object);
                    object.position.z -= 300;
                    object.position.y -= 80;
                    object.rotation.x = 1;
                });
            });

			/*
            const animate = function () {
				requestAnimationFrame( animate );

				cube.rotation.x += 0.01;
				cube.rotation.y += 0.01;

				
			}; 
            
			animate();
            */

            var render = function() {
                requestAnimationFrame(render);
                //stageObj.rotation.z = .01;
                renderer.render( scene, camera );
            }

            render();
		</script>
	</body>
</html>